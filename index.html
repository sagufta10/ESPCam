<!DOCTYPE html>
<html>
<head>
  <title>ESP32-CAM Viewer</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1 {
      margin-top: 20px;
      font-size: 28px;
    }

    #startBtn {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      background: #4CAF50;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 20px;
    }

    #startBtn:hover {
      background: #3da044;
    }

    #camStream {
      width: 100%;
      max-width: 640px;
      border: 3px solid #333;
      border-radius: 8px;
      margin-top: 20px;
      display: none;
    }

    #errorBox {
      margin-top: 20px;
      color: #ff5555;
      font-size: 20px;
      font-weight: bold;
      display: none;
    }
  </style>
</head>
<body>

  <h1>ESP32-CAM Live Streaming</h1>

  <button id="startBtn" onclick="startStream()">Start Camera</button>

  <img id="camStream" src="" alt="Camera Stream">
  <div id="errorBox"></div>

  <script>
    function startStream() {
      const ip = "YOUR_ESP32_IP";   // <-- Replace with real IP

      const img = document.getElementById("camStream");
      const errorBox = document.getElementById("errorBox");
      const button = document.getElementById("startBtn");

      // Reset both
      img.style.display = "none";
      errorBox.style.display = "none";
      errorBox.innerHTML = "";

      // Start video stream
      img.src = `http://${ip}/stream`;

      // When image loads → show it
      img.onload = function () {
        img.style.display = "block";
        errorBox.style.display = "none";
        button.innerText = "Streaming...";
        button.disabled = true;
      };

      // When an error occurs → show custom error message
      img.onerror = function () {
        img.style.display = "none";
        errorBox.style.display = "block";
        errorBox.innerHTML = "❌ Unable to connect to ESP32-CAM. Please check:<br><br>" +
          "• ESP32 is powered on<br>" +
          "• ESP32 is connected to WiFi<br>" +
          "• IP address is correct<br>" +
          "• Your device is on same network<br><br>" +
          "IP Tried: http://" + ip + "/stream";

        button.innerText = "Retry Camera";
        button.disabled = false;
      };
    }
  </script>

</body>
</html>
